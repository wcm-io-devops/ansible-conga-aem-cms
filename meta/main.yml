dependencies:
  - conga-facts
  - {
      role: conga-files,
      conga_files_base_path: "{{ conga_config.quickstart.rootPath }}/crx-quickstart",
      conga_files_owner: "{{ aem_cms_user }}",
      conga_files_group: "{{ aem_cms_group }}",
      conga_files_mode: "0755",
      conga_files_handlers: [ restart aem ],
    }
    # ensure service is started
  - { name: aem-service,
        aem_service_port: "{{ conga_config.quickstart.port }}",
        aem_service_name: "{{ aem_cms_service_name }}"
    }
    # manage users (e.g. change password of admin user)
  - {
      role: aem-user,
      aem_user_aem_port: "{{ conga_config.quickstart.port }}",
    }
  - {
      role: conga-bundle-files,
      conga_bundle_files_base_path: "{{ conga_config.quickstart.rootPath }}",
      conga_bundle_files_owner: "{{ aem_cms_user }}",
      conga_bundle_files_group: "{{ aem_cms_group }}",
      conga_bundle_files_mode: "0600",
      conga_bundle_files_aem_port: "{{ conga_config.quickstart.port }}",
      conga_bundle_files_handlers: [ restart aem ]
    }
  - { role: conga-aem-packages,
      conga_aem_packages_port: "{{ conga_config.quickstart.port }}",
      aem_service_name: "{{ conga_config.quickstart.rootPath | basename }}"
    }
